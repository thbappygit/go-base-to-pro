# Go Program Execution & Memory Layout (à¦¬à¦¾à¦‚à¦²à¦¾ à¦¬à§à¦¯à¦¾à¦–à§à¦¯à¦¾)

![Go Memory Layout](14da4389-2c90-449e-91ce-132b51a5d70b.png)

## Go à¦ªà§à¦°à§‹à¦—à§à¦°à¦¾à¦® à¦šà¦²à¦¾à¦° à§¨à¦Ÿà¦¿ à¦§à¦¾à¦ª

### 1ï¸âƒ£ Compilation Phase

-   `go run main.go`
    -   à¦ªà§à¦°à¦¥à¦®à§‡ **compile** à¦¹à§Ÿ
    -   `main` à¦¨à¦¾à¦®à§‡ à¦à¦•à¦Ÿà¦¿ **binary** à¦¤à§ˆà¦°à¦¿ à¦¹à§Ÿ
    -   à¦¤à¦¾à¦°à¦ªà¦° à¦¸à¦¾à¦¥à§‡ à¦¸à¦¾à¦¥à§‡ execute à¦¹à§Ÿ
-   `go build main.go`
    -   à¦¶à§à¦§à§ **compile** à¦¹à§Ÿ
    -   `main` binary à¦¤à§ˆà¦°à¦¿ à¦¹à§Ÿ
    -   à¦ªà¦°à§‡ `./main` à¦šà¦¾à¦²à¦¿à§Ÿà§‡ execute à¦•à¦°à¦¤à§‡ à¦¹à§Ÿ

ðŸ‘‰ Go à¦à¦•à¦Ÿà¦¿ **compiled language**

### Compilation Phase-à¦ Memory Allocation

-   **Code Segment (Read-only)**
    -   à¦¸à¦¬ function
    -   à¦¸à¦¬ constant
-   **Data Segment (Global Memory)**
    -   à¦¸à¦¬ global variable

------------------------------------------------------------------------

### 2ï¸âƒ£ Execution Phase

-   **Stack**
    -   function call
    -   local variable
    -   function à¦¶à§‡à¦· à¦¹à¦²à§‡ stack memory auto free à¦¹à§Ÿ
-   **Heap**
    -   `new()` à¦¬à¦¾ `make()` à¦¦à¦¿à§Ÿà§‡ à¦¤à§ˆà¦°à¦¿ data
    -   Garbage Collector (GC) à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦¨à¦¾ à¦¹à¦²à§‡ memory clear à¦•à¦°à§‡

------------------------------------------------------------------------

## Code Example

``` go
package main

import "fmt"

var g = 10 // Global variable (Data Segment)

func add(a int, b int) int { // Code Segment
    sum := a + b // Local variable (Stack)
    return sum
}

func main() {
    x := 5  // Stack
    y := 7  // Stack

    result := add(x, y)
    fmt.Println(result)

    arr := make([]int, 3) // Heap (GC handle à¦•à¦°à§‡)
    arr[0] = 1
}
```

------------------------------------------------------------------------

## Memory Flow Summary

-   Code â†’ Code Segment
-   Global variable â†’ Data Segment
-   Function call â†’ Stack
-   Dynamic data (`make`, `new`) â†’ Heap
-   Heap clean à¦•à¦°à§‡ â†’ **Garbage Collector (GC)**

------------------------------------------------------------------------

ðŸ“Œ à¦¸à¦‚à¦•à§à¦·à§‡à¦ªà§‡: \> Compile time-à¦ memory structure à¦¤à§ˆà¦°à¦¿ à¦¹à§Ÿ\
\> Runtime-à¦ Stack & Heap à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦¹à§Ÿ\
\> Heap memory Go à¦¨à¦¿à¦œà§‡à¦‡ clean à¦•à¦°à§‡ (GC)
